{"ast":null,"code":"import _classCallCheck from \"C:/Users/USER/IdeaProjects/react-csat/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/USER/IdeaProjects/react-csat/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"C:/Users/USER/IdeaProjects/react-csat/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:/Users/USER/IdeaProjects/react-csat/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\USER\\\\IdeaProjects\\\\react-csat\\\\client\\\\src\\\\users\\\\UserLogin.js\";\nimport React from 'react';\nimport { post } from 'axios';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport { withStyles } from \"@material-ui/core/styles\";\nimport axios from 'axios';\n\nvar styles = function styles(theme) {\n  return {\n    hidden: {\n      display: 'none'\n    },\n    menu: {\n      marginTop: 2,\n      marginBottom: 2,\n      display: 'flex',\n      justifyContent: 'center'\n    },\n    button: {\n      fontSize: '1.0rem',\n      justifyContent: 'center',\n      width: '100px'\n    }\n  };\n};\n\nvar UserLogin = /*#__PURE__*/function (_React$Component) {\n  _inherits(UserLogin, _React$Component);\n\n  var _super = _createSuper(UserLogin);\n\n  function UserLogin(props) {\n    var _this;\n\n    _classCallCheck(this, UserLogin);\n\n    _this = _super.call(this, props);\n\n    _this.login = function () {\n      var url = '/auth/login';\n      axios.post(url, _this.state).then(function (res) {\n        if (res.data) {\n          _this.props.userInfo(res.data);\n\n          _this.setState({\n            isLogined: true,\n            btn: 'LOGOUT'\n          });\n        } else {\n          alert(\"LOGIN에 실패했습니다. 학교명 또는 비밀번호를 확인하세요\");\n        }\n      }).catch(function (error) {\n        console.log(error);\n      });\n    };\n\n    _this.loginOpen = function () {\n      if (_this.state.isLogined) {\n        axios.get('/auth/logout').then(function (res) {\n          _this.props.userInfo('');\n\n          _this.setState({\n            isLogined: false,\n            btn: 'LOGIN'\n          });\n        });\n      } else {\n        _this.setState({\n          open: true\n        });\n      }\n    };\n\n    _this.loginClose = function () {\n      _this.setState({\n        account: '',\n        password: '',\n        open: false\n      });\n    };\n\n    _this.handleValueChange = function (e) {\n      var nextState = {};\n      nextState[e.target.name] = e.target.value;\n\n      _this.setState(nextState);\n    };\n\n    _this.handleFormSubmit = function (e) {\n      e.preventDefault();\n\n      _this.login();\n\n      _this.setState({\n        account: '',\n        password: '',\n        open: false\n      });\n    };\n\n    _this.state = {\n      account: '',\n      password: '',\n      open: false,\n      isLogined: false,\n      btn: 'LOGIN'\n    };\n    return _this;\n  }\n\n  _createClass(UserLogin, [{\n    key: \"render\",\n    value: function render() {\n      var classes = this.props.classes;\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          id: \"LoginButton\",\n          color: \"inherit\",\n          onClick: this.loginOpen,\n          children: this.state.btn\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n          open: this.state.open,\n          onClose: this.loginClose,\n          children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n            className: classes.menu,\n            children: \"\\uB85C\\uADF8\\uC778\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n            children: [/*#__PURE__*/_jsxDEV(TextField, {\n              className: classes.menu,\n              label: \"\\uD559\\uAD50\\uBA85\",\n              type: \"text\",\n              name: \"account\",\n              variant: \"outlined\",\n              value: this.state.account,\n              onChange: this.handleValueChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 181\n            }, this), /*#__PURE__*/_jsxDEV(TextField, {\n              className: classes.menu,\n              label: \"\\uBE44\\uBC00\\uBC88\\uD638\",\n              type: \"password\",\n              name: \"password\",\n              variant: \"outlined\",\n              value: this.state.password,\n              onChange: this.handleValueChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 188\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n            className: classes.menu,\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              className: classes.button,\n              variant: \"contained\",\n              color: \"primary\",\n              onClick: this.handleFormSubmit,\n              children: \"\\uB85C\\uADF8\\uC778\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              className: classes.button,\n              variant: \"contained\",\n              color: \"secondary\",\n              onClick: this.loginClose,\n              children: \"\\uB2EB\\uAE30\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 13\n      }, this);\n    }\n  }]);\n\n  return UserLogin;\n}(React.Component);\n\nexport default withStyles(styles)(UserLogin);","map":{"version":3,"sources":["C:/Users/USER/IdeaProjects/react-csat/client/src/users/UserLogin.js"],"names":["React","post","Dialog","DialogActions","DialogTitle","DialogContent","TextField","Button","withStyles","axios","styles","theme","hidden","display","menu","marginTop","marginBottom","justifyContent","button","fontSize","width","UserLogin","props","login","url","state","then","res","data","userInfo","setState","isLogined","btn","alert","catch","error","console","log","loginOpen","get","open","loginClose","account","password","handleValueChange","e","nextState","target","name","value","handleFormSubmit","preventDefault","classes","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { post } from 'axios';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport {withStyles} from \"@material-ui/core/styles\";\r\nimport axios from 'axios';\r\n\r\nconst styles = theme =>({\r\n    hidden : {\r\n        display: 'none'\r\n    },\r\n    menu:{\r\n        marginTop : 2,\r\n        marginBottom : 2,\r\n        display:'flex',\r\n        justifyContent: 'center'\r\n    },\r\n    button:{\r\n        fontSize: '1.0rem',\r\n        justifyContent : 'center',\r\n        width: '100px'\r\n    }\r\n});\r\n\r\n\r\nclass UserLogin extends React.Component{\r\n\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            account: '',\r\n            password: '',\r\n            open: false,\r\n            isLogined: false,\r\n            btn: 'LOGIN'\r\n        }\r\n    }\r\n    login = () => {\r\n        const url ='/auth/login'\r\n        axios.post(url, this.state)\r\n            .then(res =>{\r\n                if(res.data){\r\n                    this.props.userInfo(res.data)\r\n                    this.setState({\r\n                        isLogined : true,\r\n                        btn : 'LOGOUT'\r\n                    })    \r\n                }else{\r\n                    alert(\"LOGIN에 실패했습니다. 학교명 또는 비밀번호를 확인하세요\")\r\n                }\r\n                \r\n            })\r\n            .catch(error=>{\r\n                console.log(error)\r\n            })\r\n    }\r\n\r\n    loginOpen = () => {\r\n        if(this.state.isLogined){\r\n            axios.get('/auth/logout')\r\n                .then(res =>{\r\n                    this.props.userInfo('')\r\n                    this.setState({\r\n                        isLogined : false,\r\n                        btn : 'LOGIN'\r\n                    })\r\n                })\r\n        }else{\r\n            this.setState({\r\n                open: true\r\n            });\r\n        }\r\n\r\n    }\r\n    loginClose = () => {\r\n        this.setState({\r\n            account : '',\r\n            password : '',\r\n            open : false\r\n        })\r\n    }\r\n\r\n    handleValueChange = (e) => {\r\n        let nextState = {};\r\n        nextState[e.target.name] = e.target.value;\r\n        this.setState(nextState);\r\n    }\r\n\r\n    handleFormSubmit = (e) => {\r\n        e.preventDefault()\r\n        this.login()\r\n        this.setState({\r\n            account : '',\r\n            password : '',\r\n            open : false\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n        return (\r\n            <div>\r\n                <Button id=\"LoginButton\" color=\"inherit\" onClick={this.loginOpen}>{this.state.btn}</Button>\r\n                <Dialog  open={this.state.open} onClose={this.loginClose}>\r\n                    <DialogTitle className={classes.menu} >로그인</DialogTitle>\r\n                    <DialogContent >\r\n                        <TextField className={classes.menu} label=\"학교명\" type=\"text\" name=\"account\" variant=\"outlined\" value={this.state.account} onChange={this.handleValueChange}/><br/>\r\n                        <TextField className={classes.menu} label=\"비밀번호\" type=\"password\" name=\"password\" variant=\"outlined\" value={this.state.password} onChange={this.handleValueChange}/><br/>\r\n                    </DialogContent>\r\n                    <DialogActions className={classes.menu}>\r\n                        <Button className={classes.button} variant=\"contained\" color=\"primary\" onClick={this.handleFormSubmit}>로그인</Button>\r\n                        <Button className={classes.button} variant=\"contained\" color=\"secondary\" onClick={this.loginClose}>닫기</Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default withStyles(styles)(UserLogin);"]},"metadata":{},"sourceType":"module"}